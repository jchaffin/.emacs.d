\documentclass{article}
\usepackage[usenames]{color}
\pagestyle{empty}
% do not remove
% The settings below are copied from fullpage.sty
\setlength{\textwidth}{\paperwidth}
\addtolength{\textwidth}{-3cm}
\setlength{\oddsidemargin}{1.5cm}
\addtolength{\oddsidemargin}{-2.54cm}
\setlength{\evensidemargin}{\oddsidemargin}
\setlength{\textheight}{\paperheight}
\addtolength{\textheight}{-\headheight}
\addtolength{\textheight}{-\headsep}
\addtolength{\textheight}{-\footskip}
\addtolength{\textheight}{-3cm}
\setlength{\topmargin}{1.5cm}
\addtolength{\topmargin}{-2.54cm}

\usepackage{fontspec}
\usepackage{amsmath}
\usepackage{unicode-math}

\setmathfont{STIX2Math}[
  Extension = .otf,
]
% Set the main font to Stix Two Text
\setmainfont{STIX2Text}[
  Extension      = .otf,
  UprightFont    = *-Regular,
  BoldFont       = *-Bold,
  ItalicFont     = *-Italic,
  BoldItalicFont = *-BoldItalic
]
% NOTE: algorithm2e contains non UTF-8 characters.
% Have to manually save algorithme2e.sty as UTF-8 for compatibility
% with LuaLaTeX, which may cause issues with 8-bit encodings and pdflatex.
% https://tex.stackexchange.com/questions/34814/lualatex-and-algorithm2e/34815
\usepackage{subcaption}
\usepackage[algoruled,linesnumbered]{algorithm2e}
\newcommand{\nosemic}{\SetEndCharOfAlgoLine{\relax}} % Drop semi-colon ;
\newcommand{\dosemic}{\SetEndCharOfAlgoLine{\string;}} % Reinstate
\newcommand{\pushline}{\Indp}% Indent
\newcommand{\popline}{\Indm\dosemic}% Remove indent
% Default Keywords
\SetKwInOut{Input}{Input}
\SetKwInOut{Output}{Output}
\SetKwProg{proc}{Procedure}{}{}
\SetKwComment{Comment}{$\triangleright$\ }{}
\SetKwProg{Fn}{Function}{:}{end}

\newcommand{\forcond}[3]{$#1=#2$ \KwTo $#3$}
\newcommand{\forcondi}[2]{\forcond{i}{#1}{#2}}
\newcommand{\forcondj}[2]{\forcond{j}{#1}{#2}}

% Use 'algo_' string prefixes for vref labels.
\usepackage{varioref}
\labelformat{algocf}{\textit{alg.}\,(#1)}

\usepackage{listings}
\lstset{
  basicstyle=\ttfamily,
}
