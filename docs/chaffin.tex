% Created 2017-11-19 Sun 06:58
% Intended LaTeX compiler: pdflatex
\documentclass[11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage{longtable}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{textcomp}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{hyperref}
\author{Jacob Chaffin}
\date{\today}
\title{Jacob Chaffin's Literate Emacs Configuration}
\hypersetup{
 pdfauthor={Jacob Chaffin},
 pdftitle={Jacob Chaffin's Literate Emacs Configuration},
 pdfkeywords={},
 pdfsubject={},
 pdfcreator={Emacs 25.3.1 (Org mode N/A)}, 
 pdflang={English}}
\begin{document}

\maketitle

\section*{Configuration}
\label{sec:org2d10916}
\subsection*{Preface}
\label{sec:org6bca3c0}
\subsubsection*{About}
\label{sec:org9e2ff35}

\href{https://en.wikipedia.org/wiki/literate\_programming}{Literate Programming} is a method of writing computer programs where
the composition, logic, and structure of the program are optimized for
human comprehension. Introduced by Donald Knuth in his 1983 eponymous
work, a literate program interoperates source code with macros,
commentary, and documentation written in natural language prose. The
source code is then extracted in a pre-compilation step known as
\emph{tangling}.

Where as a program is traditionally presented in a tree structure, a
programmer implementing literate techniques arranges parts and forms
the relations of these parts in the order of human logic.

A literate program is then structured like an essay or other work of
literature, where ideas are connected in the form of a web rather than
the unidirectional order of interpretation that is characteristic of a
compiler.

\subsubsection*{Influences}
\label{sec:org3c95bef}

\begin{itemize}
\item \href{http://pages.sachachua.com/.emacs.d/sacha.html}{Sacha Chua's Emacs Configuration}
\item \href{http://aaronbedra.com/emacs.d/}{Aaron Bedra's Emacs Configuration}
\item \href{https://github.com/Wasamasa/dotemacs/blob/master/init.org}{wasamasa/dotemacs}
\item \href{http://fgiasson.com/blog/index.php/2016/06/21/optimal-emacs-settings-for-org-mode-for-literate-programming/}{Optimal Emacs Settings For Org Mode For Literal Programming}
\end{itemize}

\subsection*{Package Management}
\label{sec:org3539dc1}
\subsubsection*{straight.el}
\label{sec:orgf45399d}

Currently we have a tumultuous relationship.

\subsubsection*{Use Package}
\label{sec:org920788b}

\begin{verbatim}
(eval-when-compile
    (require 'use-package))
  (require 'diminish)
  (require 'bind-key)
\end{verbatim}

\subsubsection*{Default Packages}
\label{sec:org4f345bb}

\begin{verbatim}
(require 'cl)
(require 'dash)
\end{verbatim}

\subsection*{User Information}
\label{sec:org4df887d}

These values are initialized with the ’name’ and ’email’
environment variables, respectively\footnote{\href{https://www.gnu.org/software/emacs/manual/html\_node/emacs/General-Variables.html\#General-Variables}{Emacs Manual - C.4.1 General Variables}}.

Emacs uses these variables to fill the mail header when sending
emails in emacs, and various third-party packages rely on them
for correct behavior.

\begin{verbatim}
  (setq user-full-name "Jacob Chaffin"
        user-mail-address "jchaffin@ucla.edu")
\end{verbatim}

Ensure that programs store emacs information in the cannonical
directory.

\begin{verbatim}
  (setq user-emacs-directory "~/.emacs.d/")
\end{verbatim}

\subsection*{Core}
\label{sec:orgb030dfb}
\subsubsection*{Macros}
\label{sec:org9bb61d1}
\paragraph*{\texttt{with-system}}
\label{sec:org24d2e92}

This is a simple utility macro that evaluates code depending on
operating system type.

Where as the top level \texttt{system-type} aliases are intended to simplify
conditionals of the \emph{if-then} form or \emph{if-else-then} form, the
\texttt{with-system} macro is intended for use in structures with a single
conditional clause.

In emacs-lisp, this kind of statement can be expressed with the \texttt{when}
macro\footnote{\href{https://www.gnu.org/software/emacs/manual/html\_node/elisp/Conditionals.html}{Emacs Manual - 10.2 Conditionals}}.

Credits to stack overflow user \href{https://stackoverflow.com/users/403018/gerstmann}{gerstmann}, who provided this solution
in the following stack overflow \href{https://stackoverflow.com/a/26137517/6233622}{ticket}.

\begin{verbatim}
(defmacro with-system (type &rest body)
  "If TYPE equals `system-type', evaluate BODY."
  (declare (indent defun))
  `(when (eq system-type ',type)
     ,@body))
\end{verbatim}

\subsubsection*{Functions}
\label{sec:org4410ca7}
\paragraph*{Add multiple hooks}
\label{sec:org461b0f5}

See Stack Overflow ticket \href{https://stackoverflow.com/a/7400476/6233622}{\#7398216}

\begin{verbatim}
  (defun add-to-hooks (fun hooks)
          "Add function to hooks"
          (dolist (hook hooks)
           (add-hook hook fun)))
\end{verbatim}

\paragraph*{Join Strings with Separator}
\label{sec:org22d6c9b}

\begin{verbatim}
(defun join (lst sep)
  (mapconcat 'identity lst sep))
\end{verbatim}

\subsection*{Environment}
\label{sec:org0dfe034}
\subsubsection*{macOS}
\label{sec:org56c1a44}

I work on a macbook, so this block is where I'm loading all of my settings that rely on local
filepaths, macOS applications, and external programs.

\begin{verbatim}
(defconst *is-mac* (eq system-type 'darwin))
\end{verbatim}

\paragraph*{Computer Name}
\label{sec:orgd86864a}

\begin{verbatim}
(defun chaffin/computer-name-cmd ()
  (let* ((has-scutil (executable-find "scutil"))
	 (scutil-cmd (lambda () (shell-command-to-string "scutil --get ComputerName"))))
    (if has-scutil
	(replace-regexp-in-string "\n" "" (funcall scutil-cmd))
      nil)))

(defvar computer-name (chaffin/computer-name-cmd))
(defconst *is-hal* (string= computer-name "hal"))
\end{verbatim}

\paragraph*{Keybindings}
\label{sec:org03476d5}
macOS specific settings\footnote{\href{https://www.emacswiki.org/emacs/EmacsForMacOS}{EmacsForMacOS}}.

Maps the modifier keys based on personal preferences.
Also sets terminal coding system to "utf-8".

\begin{verbatim}
(setq mac-command-modifier 'super
            mac-option-modifier 'meta
            ns-control-modifier 'control
            ns-function-modifier 'hyper)

(set-terminal-coding-system 'utf-8)
(prefer-coding-system 'utf-8)
\end{verbatim}

\paragraph*{Reveal in OSX Finder}
\label{sec:org192255f}

\begin{verbatim}
  (use-package reveal-in-osx-finder
    :ensure t
    :bind ("C-c z" . reveal-in-osx-finder))
\end{verbatim}

\paragraph*{OSX Dictionary}
\label{sec:orgff9b12b}

Provides an interface to \emph{Dictionary.app} in Emacs.

\begin{verbatim}
  (use-package osx-dictionary
    :ensure t
    :bind (("C-c C-d" . osx-dictionary-search-word-at-point)
           ("C-c i" . osx-dictionary-search-input)))
\end{verbatim}

\paragraph*{Exec Path From Shell}
\label{sec:orgc53c222}

Emacs relies heavily on shell environment variables.

These variables may not be picked up when launching emacs
from a gui on a unix-like operating system.

The \href{https://github.com/purcell/exec-path-from-shell}{exec-path-from-shell} package fixes this problem by copying
user environment variables from the shell.

The \texttt{exec-path-from-shell} package only works with posix-compliant
operating systems. This may or may not include Microsoft Windows\footnote{\href{https://www.quora.com/Is-Windows-POSIX-compliant}{Quora - Is Windows POSIX compliant?}}.

However, the \texttt{exec-path-from-shell} instructions recommends loading
the package on linux and macOS operating system. I don't use Windows
all that often anyways, so that's fine with me.

The \texttt{:if} key of \texttt{use-package} offers us a really concise way for
conditionally loading dependencies.

\begin{verbatim}
  (use-package exec-path-from-shell
    ;; only load `exec-path-from-shell' package on macos and linux.
    :if (memq window-system '(mac ns))
    :ensure t
    :config
    (exec-path-from-shell-initialize)
    (setq exec-path-from-shell-check-startup-files nil))
\end{verbatim}

\subsubsection*{Other Operating Systems}
\label{sec:org721816e}
\paragraph*{Windows/PC}
\label{sec:org29ce3ee}

\begin{verbatim}
(defconst *is-windows* (eq system-type 'windows))
\end{verbatim}

\paragraph*{Linux}
\label{sec:orgff1a639}

\begin{verbatim}
(defconst *is-linux* (eq system-type 'linux))
\end{verbatim}

\subsubsection*{Graphical Interace}
\label{sec:org56a0112}

There's some packages and commands I only want available when Emacs is
running in a graphical interface. Things like image-rendering, large
packages, and image rendering.

\begin{verbatim}
  (defconst *is-gui* (display-graphic-p))
\end{verbatim}

\subsubsection*{Custom File}
\label{sec:org90421c4}

By default, Emacs customizations\footnote{\href{https://www.gnu.org/software/emacs/manual/html\_node/emacs/Saving-Customizations.html}{Emacs Manual - 51.1.4 Saving Customizations}} done through the \texttt{customize}
interface write to \texttt{user-init-file}.

While I usually prefer configuring emacs programmatically, settings
that depend on resources outside of this repository, such as
org-agenda files, will impact portability and potentially break on
other machines.

\begin{verbatim}
(setq custom-file "~/.emacs.d/custom/custom.el")
(load custom-file)
\end{verbatim}

\subsubsection*{Backup Files}
\label{sec:org063da41}

This might come back to bite me one day but I never use them.

\begin{verbatim}
(setq make-backup-files nil)
\end{verbatim}

\subsubsection*{Use Emacs Terminfo}
\label{sec:orgdcfcc9b}
Setting this variable to false forces Emacs to use internal terminfo,
rather than the system terminfo.

\begin{verbatim}
  (setq system-uses-terminfo nil)
\end{verbatim}

\subsection*{Org Mode}
\label{sec:org8728288}

\subsubsection*{Org Prettify}
\label{sec:org634f915}

These settings subjectively improve the overall viewable-ness of
org-mode buffers.

\begin{verbatim}
  (add-hook #'org-mode-hook (lambda ()
                              (auto-fill-mode)
                              (visual-line-mode)))
(setq org-image-actual-width 400)
  (use-package org-bullets
    :ensure t
    :init
    (add-hook 'org-mode-hook (lambda () (org-bullets-mode 1))))

(use-package toc-org
  :ensure t
  :init
  (add-hook 'org-mode-hook 'toc-org-enable))
\end{verbatim}

\paragraph*{Improve Legibility}
\label{sec:orgb943234}

\begin{verbatim}
  (add-hook #'org-mode-hook (lambda ()
                              (auto-fill-mode)
                              (visual-line-mode)))
\end{verbatim}

\paragraph*{Image Size}
\label{sec:org5534c0c}

Make images compact.

\begin{verbatim}
(setq org-image-actual-width 400)
\end{verbatim}

\paragraph*{Org Bullets}
\label{sec:orgcc217a5}

Use UTF-8 Bullets for Org-mode headings.

\begin{verbatim}
  (use-package org-bullets
    :ensure t
    :init
    (add-hook 'org-mode-hook (lambda () (org-bullets-mode 1))))

\end{verbatim}

\paragraph*{Org Beautify Theme}
\label{org-beautify-theme}
\begin{verbatim}
  (use-package org-beautify-theme
    :ensure nil
    :defines org-beautify-theme-use-box-hack
    :config
    (setq org-beautify-theme-use-box-hack nil)
    (add-to-list 'custom-enabled-themes 'org-beautify)
    (load-theme 'org-beautify t))
\end{verbatim}

\paragraph*{TOC Org}
\label{sec:org30e8b94}

\begin{verbatim}
(use-package toc-org
  :ensure t
  :init
  (add-hook 'org-mode-hook 'toc-org-enable))
\end{verbatim}

\subsubsection*{Org Utilities}
\label{sec:orgbc6b7af}

\begin{verbatim}
  (use-package org-agenda
    :recipe org
    :defer-install t
    :bind (("C-c a" . org-agenda)))
  (use-package org-pomodoro
    :ensure t
    :bind (:map org-mode-map
                ("C-c M-RET p" . org-pomodoro))
    :config
    (setq org-pomodoro-audio-player "afplay"
          org-pomodoro-tick-sound
          (expand-file-name "~/.emacs.d/resources/clock-ticking-2.wav")
          ;; Start Settings
          org-pomodoro-start-sound-p t ;; enable starting sound
          org-pomodoro-start-sound-args "--volume 0.08"
          org-pomodoro-start-sound
          (expand-file-name "~/.emacs.d/resources/Victory.wav")
          ;; Finished Settings
          org-pomodoro-finished-sound-args "--volume 0.2"
          org-pomodoro-finished-sound
          (expand-file-name "~/.emacs.d/resources/Waves.wav")
          ;; Short Break Settings
          org-pomodoro-short-break-length 5
          org-pomodoro-short-break-sound-args "--volume 0.2"
          org-pomodoro-short-break-sound org-pomodoro-finished-sound
          ;; Long Break Settings
          org-pomodoro-long-break-length 15
          org-pomodoro-long-break-sound-args "--volume 0.2"
          org-pomodoro-long-break-sound
          (expand-file-name "~/.emacs.d/resources/Complete.wav")))
  (use-package org-ref
    :if *is-mac*
    :ensure t
    :config
    (progn
      (setq org-ref-bibliography-notes "~/Dropbox/org/papers/notes.org"
            org-ref-default-bibliography '("~/Dropbox/org/papers/references.bib")
            org-ref-pdf-directory "~/Dropbox/org/papers/pdfs/")
      (require 'org-ref-pdf)
      (require 'org-ref-latex)
      (require 'org-ref-reftex)
      (require 'org-ref-utils)
      (require 'org-ref-url-utils)
      (require 'org-ref-pubmed)
      (require 'org-ref-scopus)
      (require 'org-ref-scifinder)
      (require 'org-ref-citeproc)
      (require 'org-ref-sci-id)
      (require 'org-ref-isbn)
      (require 'org-ref-wos)
      (require 'org-ref-worldcat)
      (require 'x2bib)))
(setq org-ref-completion-library 'org-ref-ivy-cite)
(require 'org-ref)
(require 'org-ref-ivy)
(require 'org-ref-ivy-cite)
(defun chaffin/org-ref-open-pdf-at-point ()
  "Open the pdf for bibtex key under point if it exists."
  (interactive)
  (let* ((results (org-ref-get-bibtex-key-and-file))
         (key (car results))
         (pdf-file (funcall org-ref-get-pdf-filename-function key)))
    (if (file-exists-p pdf-file)
        (find-file pdf-file)
      (message "No PDF found for %s" key))))

(setq org-ref-open-pdf-function 'chaffin/org-ref-open-pdf-at-point)

(require 'org-id)
(setq org-id-link-to-org-use-id 'create-if-interactive-and-no-custom-id)
(defun chaffin/org-custom-id-get (&optional pom create prefix)
  "Get the CUSTOM_ID property of the entry at point-or-marker POM.
   If POM is nil, refer to the entry at point. If the entry does
   not have an CUSTOM_ID, the function returns nil. However, when
   CREATE is non nil, create a CUSTOM_ID if none is present
   already. PREFIX will be passed through to `org-id-new'. In any
   case, the CUSTOM_ID of the entry is returned."
  (interactive)
  (org-with-point-at pom
    (let ((id (org-entry-get nil "CUSTOM_ID")))
      (cond
       ((and id (stringp id) (string-match "\\S-" id))
        id)
       (create
        (setq id (org-id-new (concat prefix "h")))
        (org-entry-put pom "CUSTOM_ID" id)
        (org-id-add-location id (buffer-file-name (buffer-base-buffer)))
        id)))))
\end{verbatim}

\paragraph*{Org Agenda}
\label{sec:org9a99710}

\begin{verbatim}
  (use-package org-agenda
    :recipe org
    :defer-install t
    :bind (("C-c a" . org-agenda)))
\end{verbatim}

\paragraph*{Org Pomodoro}
\label{sec:org98ba444}

\begin{verbatim}
  (use-package org-pomodoro
    :ensure t
    :bind (:map org-mode-map
                ("C-c M-RET p" . org-pomodoro))
    :config
    (setq org-pomodoro-audio-player "afplay"
          org-pomodoro-tick-sound
          (expand-file-name "~/.emacs.d/resources/clock-ticking-2.wav")
          ;; Start Settings
          org-pomodoro-start-sound-p t ;; enable starting sound
          org-pomodoro-start-sound-args "--volume 0.08"
          org-pomodoro-start-sound
          (expand-file-name "~/.emacs.d/resources/Victory.wav")
          ;; Finished Settings
          org-pomodoro-finished-sound-args "--volume 0.2"
          org-pomodoro-finished-sound
          (expand-file-name "~/.emacs.d/resources/Waves.wav")
          ;; Short Break Settings
          org-pomodoro-short-break-length 5
          org-pomodoro-short-break-sound-args "--volume 0.2"
          org-pomodoro-short-break-sound org-pomodoro-finished-sound
          ;; Long Break Settings
          org-pomodoro-long-break-length 15
          org-pomodoro-long-break-sound-args "--volume 0.2"
          org-pomodoro-long-break-sound
          (expand-file-name "~/.emacs.d/resources/Complete.wav")))
\end{verbatim}

\paragraph*{Org Ref}
\label{sec:org1457968}

\begin{verbatim}
  (use-package org-ref
    :if *is-mac*
    :ensure t
    :config
    (progn
      (setq org-ref-bibliography-notes "~/Dropbox/org/papers/notes.org"
            org-ref-default-bibliography '("~/Dropbox/org/papers/references.bib")
            org-ref-pdf-directory "~/Dropbox/org/papers/pdfs/")
      (require 'org-ref-pdf)
      (require 'org-ref-latex)
      (require 'org-ref-reftex)
      (require 'org-ref-utils)
      (require 'org-ref-url-utils)
      (require 'org-ref-pubmed)
      (require 'org-ref-scopus)
      (require 'org-ref-scifinder)
      (require 'org-ref-citeproc)
      (require 'org-ref-sci-id)
      (require 'org-ref-isbn)
      (require 'org-ref-wos)
      (require 'org-ref-worldcat)
      (require 'x2bib)))
\end{verbatim}

\subparagraph*{Org Ref Ivy}
\label{sec:org4a9ee6e}

\begin{verbatim}
(setq org-ref-completion-library 'org-ref-ivy-cite)
(require 'org-ref)
(require 'org-ref-ivy)
(require 'org-ref-ivy-cite)
\end{verbatim}

\subparagraph*{Open Pdf at point}
\label{sec:org442fd21}

See \href{https://github.com/jkitchin/org-ref/blob/master/org-ref.org\#using-doc-view-or-pdf-tools}{Using Doc View or PDF Tools} section of \texttt{org-ref} documentation.

\begin{verbatim}
(defun chaffin/org-ref-open-pdf-at-point ()
  "Open the pdf for bibtex key under point if it exists."
  (interactive)
  (let* ((results (org-ref-get-bibtex-key-and-file))
         (key (car results))
         (pdf-file (funcall org-ref-get-pdf-filename-function key)))
    (if (file-exists-p pdf-file)
        (find-file pdf-file)
      (message "No PDF found for %s" key))))

(setq org-ref-open-pdf-function 'chaffin/org-ref-open-pdf-at-point)

\end{verbatim}

\paragraph*{Org ID}
\label{sec:org3fe091f}

\subparagraph*{Custom ID}
\label{sec:orgc4a8dd4}

\begin{verbatim}
(require 'org-id)
(setq org-id-link-to-org-use-id 'create-if-interactive-and-no-custom-id)
\end{verbatim}


\begin{itemize}
\item Get Custom ID
\label{sec:org432a77c}

From \href{https://writequit.org/articles/emacs-org-mode-generate-ids.html}{Emacs Org Mode Generate Ids} blogpost:

\begin{verbatim}
(defun chaffin/org-custom-id-get (&optional pom create prefix)
  "Get the CUSTOM_ID property of the entry at point-or-marker POM.
   If POM is nil, refer to the entry at point. If the entry does
   not have an CUSTOM_ID, the function returns nil. However, when
   CREATE is non nil, create a CUSTOM_ID if none is present
   already. PREFIX will be passed through to `org-id-new'. In any
   case, the CUSTOM_ID of the entry is returned."
  (interactive)
  (org-with-point-at pom
    (let ((id (org-entry-get nil "CUSTOM_ID")))
      (cond
       ((and id (stringp id) (string-match "\\S-" id))
        id)
       (create
        (setq id (org-id-new (concat prefix "h")))
        (org-entry-put pom "CUSTOM_ID" id)
        (org-id-add-location id (buffer-file-name (buffer-base-buffer)))
        id)))))
\end{verbatim}
\end{itemize}

\subsubsection*{Org PDF}
\label{sec:org5a1d4da}

\paragraph*{Pdf Tools}
\label{sec:org2150c5b}

\begin{verbatim}
(use-package pdf-tools
  :ensure t
  :defer t
  :config
  (pdf-tools-install))
\end{verbatim}

\paragraph*{Org PDF View}
\label{sec:org59f9cde}

\begin{verbatim}
  (use-package org-pdfview
    :after pdf-tools
    :ensure t
    :mode (("\\.pdf\\'" . pdf-view-mode)))
\end{verbatim}

Now we can open pdf files with \texttt{org-pdfview}\footnote{See \href{https://matt.hackinghistory.ca/2015/11/11/note-taking-with-pdf-tools/}{Note taking with pdf-tools}}:

\begin{verbatim}
(with-eval-after-load 'org-pdfview
  (add-to-list 'org-file-apps '("\\.pdf\\'" . (lambda (file link) (org-pdfview-open link)))))
\end{verbatim}

\subsubsection*{Org Export}
\label{sec:orgb0e8c33}

\paragraph*{\LaTeX{} Backend}
\label{sec:org090f599}

\subparagraph*{Latexmk}
\label{sec:org8b66e7f}

\href{https://ctan.org/pkg/latexmk?lang=en}{Latexmk} automates the proces of building \LaTeX{} documents to pdf.

It can be done through the \texttt{org-mode} latex export dispatcher in a single command:

\begin{verbatim}
(setq org-latex-pdf-process
    '("latexmk -pdflatex='pdflatex -interaction nonstopmode' -synctex=1 -pdf -bibtex -f %f"))
\end{verbatim}

\subparagraph*{Prefer user provided labeling system}
\label{sec:orgcbe3a8c}

\begin{verbatim}
(setq org-latex-prefer-user-labels t)
\end{verbatim}

\subparagraph*{Org \LaTeX{} Default Packages}
\label{sec:org4055c7d}
\begin{verbatim}
<<org-export-latex-default-packages-natbib>>
\end{verbatim}

\begin{itemize}
\item Natbib
\label{sec:orgaafcae6}

Add \href{https://ctan.org/pkg/natbib?lang=en}{natbib} package, as it's the easiest way to get BibTeX support
through \href{https://github.com/jkitchin/org-ref/blob/master/org-ref.org}{org-ref} and other tools for \LaTeX{} in Emacs.

\begin{verbatim}
(add-to-list 'org-latex-default-packages-alist '("" "natbib" "") t)
\end{verbatim}
\end{itemize}

\subparagraph*{Custom Classes}
\label{sec:org5eb231c}
\begin{itemize}
\item Org Per File Class
\label{sec:orgc010ab3}
Adds a class for exporting to pdf using latex backend without
importing the default \texttt{ox-latex} packages. This allows the export
settings of a particular file to be completely insulated from most external
configuration.

\begin{verbatim}
(add-to-list 'org-latex-classes
	     '("per-file-class"
	       "\\documentclass{scrartcl}
	       [NO-DEFAULT-PACKAGES]
	       [EXTRA]"
	       ("\\section{%s}" . "\\section*{%s}")
	       ("\\subsection{%s}" . "\\subsection*{%s}")
	       ("\\subsubsection{%s}" . "\\subsubsection*{%s}")
	       ("\\paragraph{%s}" . "\\paragraph*{%s}")
	       ("\\subparagraph{%s}" . "\\subparagraph*{%s}")))
\end{verbatim}
\end{itemize}

\paragraph*{GitHub Flavored Markdown}
\label{sec:orgaa51f6a}

\begin{verbatim}
  (use-package ox-gfm
    :ensure t
    :init
    (with-eval-after-load 'org-mode
      (require 'ox-gfm)))
\end{verbatim}

\paragraph*{Org YouTube}
\label{sec:org0043460}
From \href{http://endlessparentheses.com/embedding-youtube-videos-with-org-mode-links.html}{Endless Parentheses} blogpost:

Embed YouTube Links in iframe.

\begin{verbatim}
(defvar yt-iframe-format
  ;; You may want to change your width and height.
  (concat "<iframe width=\"440\""
          " height=\"335\""
          " src=\"https://www.youtube.com/embed/%s\""
          " frameborder=\"0\""
          " allowfullscreen>%s</iframe>"))

(org-add-link-type
 "yt"
 (lambda (handle)
   (browse-url
    (concat "https://www.youtube.com/embed/"
            handle)))
 (lambda (path desc backend)
   (cl-case backend
     (html (format yt-iframe-format
                   path (or desc "")))
     (latex (format "\href{%s}{%s}"
                    path (or desc "video"))))))
\end{verbatim}

\paragraph*{Ox Extra}
\label{sec:org491ee5f}

Ignores headlines tagged "ignore". Unlike "noexport", the contents and
subtrees of the ignored headlines will be retained.

\begin{verbatim}
(require 'ox-extra)
(ox-extras-activate '(ignore-headlines))
\end{verbatim}

\subsection*{(Better) Defaults}
\label{sec:orgafa7857}
\subsubsection*{Better Utilities}
\label{sec:orgc4194a0}
\paragraph*{Dired+}
\label{sec:org15198ba}

Adds extensions and functionality to dired mode.

\begin{verbatim}
  (use-package dired+
    :ensure t)
\end{verbatim}

\paragraph*{Undo Tree}
\label{sec:org05eb28a}

\begin{verbatim}
  (use-package undo-tree
    :ensure t
    :init
    (global-undo-tree-mode))
\end{verbatim}

\paragraph*{Projectile}
\label{sec:org23de8c6}

\begin{verbatim}
  (use-package projectile
    :ensure t
    :config
    (projectile-mode))
\end{verbatim}

\paragraph*{Restart Emacs}
\label{sec:orgf45ed26}

The \href{https://github.com/iqbalansari/restart-emacs}{restart-emacs} package allows quickly rebooting Emacs
from within Emacs.

\begin{verbatim}
  (use-package restart-emacs
    :ensure t
    :bind (("C-x C-r" . restart-emacs)))
\end{verbatim}

\paragraph*{Popwin}
\label{sec:org3d05537}

\begin{verbatim}
(use-package popwin
  :ensure t
  :config (popwin-mode 1))
\end{verbatim}

\subsubsection*{Better Display}
\label{sec:org2d5f6cc}
\paragraph*{Page Break Lines}
\label{sec:orgafc7128}

Global minor-mode that turns \texttt{\textasciicircum{}L} form feed characters into
horizontal line rules.

\begin{verbatim}
  (use-package page-break-lines
    :ensure t
    :init
    (global-page-break-lines-mode))
\end{verbatim}

\paragraph*{Splash Screen Replacement.}
\label{sec:org25762b0}

The default splash screen is great when you're starting out,
but it's more so an annoyance than anything else once you
know you're around.

\subparagraph*{Enable Emojis for org tags in dashboard agenda widget}
\label{sec:orgb9a5189}

\begin{verbatim}
    (use-package emojify
      :ensure t
      :init (global-emojify-mode))
\end{verbatim}

\subparagraph*{Emacs Dashboard}
\label{sec:org34093f7}

\href{https://github.com/rakanalh/emacs-dashboard}{Dashboard} is a highly customizable splash screen
replacement library used in the popular \href{https://github.com/syl20bnr/spacemacs}{spacemacs} framework.
It's a nice way of consolidating any combination of tasks,
agenda items, bookmarks, and pretty much any other enumerable
list that one may use in the wacky world of Emacs.

\begin{verbatim}
  (use-package dashboard
    :ensure t
    :init
    (with-eval-after-load 'page-break-lines
      (if (not (global-page-break-lines-mode))
          (global-page-break-lines-mode)))
    :config
    (dashboard-setup-startup-hook))

  (progn
    (add-to-list 'dashboard-items '(agenda) t)
    (setq dashboard-banner-logo-title "Welcome Back, MasterChaff"
          dashboard-items '(( agenda . 10)
                            ( projects . 5)
                            ( recents . 5)
                            ( bookmarks . 5))))
\end{verbatim}

\paragraph*{Inhibit Scratch Buffer}
\label{sec:orgb833bd1}

\begin{verbatim}
  (setq initial-scratch-message nil
        inhibit-startup-message t
        inhibit-startup-screen t)
\end{verbatim}

\paragraph*{Menu Bar, Tool Bar, Scroll Bar}
\label{sec:org36504d7}

Disable scroll bars and tool bar on all system types.

On macOS, the menu bar is integrated into the UI.

Disabling it will just empty the menu tab options for Emacs.app,
so we'll leave it there.

\begin{verbatim}
  (scroll-bar-mode -1)
  (tool-bar-mode -1)
  (unless (eq system-type 'darwin)
  (menu-bar-mode -1))
\end{verbatim}

\paragraph*{Truncate Lines}
\label{sec:org2aa98d2}

Not sure this is doing anything\ldots{}

\begin{verbatim}
  (setq-default truncate-lines nil)
\end{verbatim}

\subsubsection*{Better Garbage Collection}
\label{sec:orgcb2db76}

Consider the following from the documentation:

\begin{quote}
By binding this temporarily to a large number, you can effectively
prevent garbage collection during a part of the program.
\end{quote}

When I first read how the default garbage collection interval in Emacs
is notoriously low, I added an arbitrary number of zeros to the
default value and called it a day. However, because I'm writing this monolithic
configuration and making a lot of mistakes in the process, I've had to
start Emacs with essentially its default settings pretty frequently
and I've noticed the lag time I occasionally experience when searching
long documents is essentially nonexistent in vanilla Emacs. After
reading this \href{http://bling.github.io/blog/2016/01/18/why-are-you-changing-gc-cons-threshold/}{blogpost}, it seems that jacking up the GC interval may
actually be the \emph{cause} of the lagtime rather than contributing to the
solution.


\begin{verbatim}
(defun chaffin/rev-up-gc ()
  (setq gc-cons-threshold most-positive-fixnum))

(defun chaffin/rev-down-gc ()
  (setq gc-cons-threshold 800000))

(add-hook 'minibuffer-setup-hook #'chaffin/rev-up-gc)
(add-hook 'minibuffer-exit-hook 'chaffin/rev-down-gc)
\end{verbatim}

\subsubsection*{Better Encryption}
\label{sec:org510fb11}
\paragraph*{GnuTLS}
\label{sec:org64ec1e7}

\begin{itemize}
\item See \href{https://github.com/wasamasa/dotemacs/blob/master/init.org\#gnutls}{wasamasa/dotfiles}
\end{itemize}

\begin{verbatim}
  (setq gnutls-min-prime-bits 4096)
\end{verbatim}

\paragraph*{Use GPG2}
\label{sec:org76544e5}

Set GPG program to 'gpg2'.

\begin{verbatim}
  (when *is-mac*
    (setq epg-gpg-program "gpg2"))
\end{verbatim}

\paragraph*{Disable External Pin Entry}
\label{sec:org384fce5}

Switching between Emacs and an external tools is annoying.

By default, decrypting gpg files in Emacs will result in the pin entry
window being launched from the terminal session.

By disabling the agent info, we can force Emacs to handle this
internally\footnote{\href{https://www.masteringemacs.org/article/keeping-secrets-in-emacs-gnupg-auth-sources}{Mastering Emacs - Keeping Secrets in Emacs GnuPG Auth Sources}}.

\begin{verbatim}
  (setenv "GPG_AGENT_INFO" nil)
\end{verbatim}

Or so I thought\ldots{}

\paragraph*{Internal Pinentry Problem and Solution}
\label{sec:orgd466e01}

While I couldn't figure out how to get Emacs to handle gpg pinentry
internally, I was able to still find a satisfactory solution using the
\texttt{pinentry-mac} tool.

Note that this solution requires macOS and using gpg2 for encryption.

See ticket \href{https://github.com/Homebrew/homebrew-core/issues/14737}{\#1437} from the \href{https://github.com/Homebrew/homebrew-core}{Homebrew/homebrew-core} repository.

\begin{verbatim}
  brew install pinentry-mac
  echo "pinentry-program /usr/local/bin/pinentry-mac" >> ~/.gnupg/gpg-agent.conf
  killall gpg-agent
\end{verbatim}

\subsubsection*{Better Commands}
\label{sec:org1c5d93c}
\subparagraph*{Alias Yes Or No}
\label{sec:org6ab9924}

\begin{verbatim}
(defalias 'yes-or-no-p 'y-or-n-p)
\end{verbatim}

\subsection*{Editing}
\label{sec:org6f2903d}
\subsubsection*{Indentation}
\label{sec:org87e3926}

Tabs are the bane of humanity\footnote{\href{https://www.emacswiki.org/emacs/TabsAreEvil}{Emacs Wiki - Tabs Are Evil}}. \href{http://www.urbandictionary.com/define.php?term=dont\%20\%40\%20me}{Don't @ me}.

\begin{verbatim}
  (setq tab-width 2
        indent-tabs-mode nil)
\end{verbatim}

\paragraph*{\texttt{highlight-indent-guides}}
\label{sec:orgb53e383}
\href{https://github.com/darthfennec/highlight-indent-guides}{Highlight Indent Guides} sublime-like indentation guides.

\emph{Commented out because of bug that leaves a trail of solid white line marks on the indent guide overlay.}

\begin{verbatim}
 (use-package highlight-indent-guides
    :ensure t
    :init
    (add-hook 'prog-mode-hook 'highlight-indent-guides-mode)
    :config
    (setq highlight-indent-guides-method 'character))
\end{verbatim}

\subsubsection*{YASnippet}
\label{sec:org28909e9}

YASnippet is a template system based off the TextMate snippet syntax.

Let's begin by creating a variable for our personal snippets directory.

\begin{verbatim}
  (setq user-snippets-dir (concat user-emacs-directory "snippets"))
\end{verbatim}

After installation and enabling the package, add the personal snippets
directory to the list of directories where YASnippet should look for snippets.

\begin{verbatim}
  (use-package yasnippet
    :ensure t
    :init
    (yas-global-mode 1)
    :config
    (push 'user-snippets-dir yas-snippet-dirs))
\end{verbatim}

YASnippet can also be used as a non-global minor mode on a per-buffer
basis.

Invoking \texttt{yas-reload-all} will load the snippet tables, and then
calling \texttt{yas-minor-mode} from the major mode hooks will load the
snippets corresponding to the major mode of the current buffer mode.

\begin{verbatim}
  (yas-reload-all)
  (add-hook 'prog-mode-hook #'yas-minor-mode)
\end{verbatim}

\subsubsection*{Flycheck}
\label{sec:org509c7c2}

\href{https://github.com/Flycheck/Flycheck}{On the fly} syntax highlighting.

\begin{verbatim}
  (use-package flycheck
    :defer-install t
    :init
    (setq flycheck-global-modes nil)
    :config
      (setq-default flycheck-disabled-checkers '(emacs-lisp-checkdoc)
                    flycheck-emacs-lisp-load-path 'inherit)
             (use-package flycheck-color-mode-line
      	 :ensure t
      	 :init
      	 (add-hook 'flycheck-mode 'flycheck-color-mode-line-mode)))
\end{verbatim}

\paragraph*{Flycheck Color Mode Line}
\label{sec:org7f188cb}

Colors the modeline according to current Flycheck state of buffer.

\begin{verbatim}
       (use-package flycheck-color-mode-line
	 :ensure t
	 :init
	 (add-hook 'flycheck-mode 'flycheck-color-mode-line-mode))
\end{verbatim}

\paragraph*{Flycheck Package}
\label{sec:org570c2ee}

\href{https://github.com/purcell/flycheck-package}{Flycheck Package} requires \texttt{package.el} to be enabled, so it's incompatible with \texttt{straight.el}.

\begin{verbatim}
  (use-package flycheck-package
    :ensure t
    :init
    (eval-after-load 'flycheck
      '(flycheck-package-setup)))
\end{verbatim}

\paragraph*{Flycheck in Org Special Edit Buffers}
\label{sec:org8f1b5fc}

\begin{verbatim}
  (defadvice org-edit-src-code (around set-buffer-file-name activate compile)
    (let ((file-name (buffer-file-name))) ;; (1)
      ad-do-it                            ;; (2)
      ;; (3)
      (setq buffer-file-name file-name)))
\end{verbatim}

\subsubsection*{Company}
\label{sec:orgb36c712}

Emacs has two popular packages for code completion --
\href{https://github.com/auto-complete/auto-complete}{autocomplete} and \href{https://github.com/company-mode/company-mode}{company}. This reddit \href{https://www.reddit.com/r/emacs/comments/2ekw22/autocompletemode\_vs\_companymode\_which\_is\_better/}{thread} was enough for
me to go with company.

If you need more convincing, \href{https://github.com/company-mode/company-mode/issues/68}{company-mode/company-mode\#68}
offers a comprehensive discussion on the two.

The ticket is from the ‘company-mode‘ repository, so there's
probably some bias there, but company-mode hasn't provided
any reason for me reconsider my choice.

\begin{verbatim}
(global-company-mode)
(setq company-tooltip-limit 20
      company-tooltip-align-annotations t
      company-idle-delay .3
      company-begin-commands '(self-insert-command))
\end{verbatim}

\paragraph*{Company Statistics}
\label{sec:org6ade7f2}

\href{https://github.com/company-mode/company-statistics}{Company statistics} uses a persisent store of completions to rank the
top candidates for completion.

\begin{verbatim}
  (use-package company-statistics
    :ensure t
    :config
    ;; Alternatively,
    ;; (company-statistics-mode)
    (add-hook 'after-init-hook 'company-statistics-mode))
\end{verbatim}

\paragraph*{Company Quick Help}
\label{sec:org2a6afa7}

\href{https://github.com/expez/company-quickhelp}{Company Quick Help} emulates \texttt{autocomplete} documentation-on-idle behavior, but using the
less-buggy \texttt{pos-tip} package rather than \texttt{popup-el}.

\begin{verbatim}
  (use-package company-quickhelp
    :defer t
    :commands (company-quickhelp-manual-begin)
    :bind
    (:map company-active-map
          ("C-c h" . company-quickhelp-manual-begin))
    :config
    (company-quickhelp-mode 1))
\end{verbatim}

\paragraph*{Company Dict}
\label{sec:orgf4d7107}

\begin{verbatim}
  (use-package company-dict
   :ensure t
   :init
   (add-to-list 'company-backends 'company-dict)
   :config
   (setq company-dict-enable-fuzzy t
         company-dict-enable-yasnippet t))
\end{verbatim}

\subsection*{Utilities}
\label{sec:org7a90020}
\subsubsection*{Image+}
\label{sec:org10f386b}

\href{https://github.com/mhayashi1120/Emacs-imagex}{Image+}  provides extensions for image file manipulation in Emacs.

\begin{verbatim}
  (use-package image+
    :ensure t
    :if *is-gui*
    :after image
    :config
    (eval-after-load 'image+
      `(when (require 'hydra nil t)
         (defhydra imagex-sticky-binding (global-map "C-x C-l")
           "Manipulating image"
           ("+" imagex-sticky-zoom-in "zoom in")
           ("-" imagex-sticky-zoom-out "zoom out")
           ("M" imagex-sticky-maximize "maximize")
           ("O" imagex-sticky-restore-original "resoure orginal")
           ("S" imagex-sticky-save-image "save file")
           ("r" imagex-sticky-rotate-right "rotate right")
           ("l" imagex-sticky-rotate-left "rotate left")))))
\end{verbatim}

\subsubsection*{Ivy}
\label{sec:org1357c2e}
\paragraph*{Ivy Config}
\label{sec:orgb50a575}
\href{https://github.com/abo-abo/swiper}{Ivy} is a completion and selection framework in the same vein
as helm.
It doesn't have the same kind of ecosystem or interopability,
but its easy to configure, offers a minimalistic interface,
and is every bit as good of a completion tool as helm is,
if not better.

I prefer the default regex matcher, but if you want fuzzy matching as
a fallback or replacement checkout this article on \href{https://oremacs.com/2016/01/06/ivy-flx/}{better fuzzmatching
support with ivy}.

\begin{verbatim}
  (use-package ivy
    :config
    (ivy-mode 1)
    (setq ivy-use-virtual-buffers t
          ivy-initial-inputs-alist nil
          ivy-re-builders-alist
	  '((t . ivy--regex-plus)))
      (use-package ivy-hydra
        :ensure hydra)
    (use-package historian
      :ensure t)
    (use-package ivy-historian
      :after historian 
      :ensure t))
\end{verbatim}

\paragraph*{Ivy Hydra}
\label{sec:orgcae516e}

\begin{verbatim}
  (use-package ivy-hydra
    :ensure hydra)
\end{verbatim}

\paragraph*{Ivy Historian}
\label{sec:org77ed887}

\begin{verbatim}
(use-package ivy-historian
  :after historian 
  :ensure t)
\end{verbatim}

\paragraph*{Counsel}
\label{sec:orgdcfacdd}

\begin{verbatim}
       (use-package counsel
         :ensure t
         :bind
         (("C-c C-r" . ivy-resume)
          ("C-`" . ivy-avy)
         ("M-x" . counsel-M-x)
         ("M-y" . counsel-yank-pop)
         ("C-x C-f" . counsel-find-file)
         ("<f1> f" . counsel-describe-function)
         ("<f1> v" . counsel-describe-variable)
         ("<f1> l" . counsel-load-library)
         ("<f2> i" . counsel-info-lookup-symbol)
         ("<f2> u" . counsel-unicode-char)
         ("C-c g" . counsel-git)
         ("C-c j" . counsel-git-grep)
         ("C-c k" . counsel-ag)
         ("C-x l" . counsel-locate)
         ("C-S-o" . counsel-rhythmbox)
         :map read-expression-map
         ("C-r" . counsel-expression-history))
         :init
           (progn
               (use-package ivy
                 :config
                 (ivy-mode 1)
                 (setq ivy-use-virtual-buffers t
                       ivy-initial-inputs-alist nil
                       ivy-re-builders-alist
             	  '((t . ivy--regex-plus)))
                   (use-package ivy-hydra
                     :ensure hydra)
                 (use-package historian
                   :ensure t)
                 (use-package ivy-historian
                   :after historian 
                   :ensure t))
               (use-package swiper
               :bind
               (("\C-s" . swiper))
               :init
                 (use-package avy
                   :ensure t))
               (use-package counsel-projectile
                 :ensure t
                 :init
                 (progn
                   (counsel-projectile-on)))
                (use-package counsel-osx-app
                  :if *is-mac*
                  :ensure t
                  :bind (("C-c o a" . counsel-osx-app)))
               (use-package counsel-dash
                 :if *is-mac*
                 :ensure t
                 :init (defun counsel-dash-at-point ()
                         "Counsel dash with selected point."
                         (interactive)
                         (counsel-dash
                          (if (use-region-p)
                              (buffer-substring-no-properties
                               (region-beginning)
                               (region-end))
                            (substring-no-properties (or (thing-at-point 'symbol) "")))))
                 :config
                 (setq counsel-dash-docsets-path
                       (expand-file-name "~/Library/Application\sSupport/Dash/DocSets")))
               (use-package smex
                 :ensure t
                 :init (setq-default smex-history-length 32))))
\end{verbatim}

\paragraph*{Swiper}
\label{sec:org44dd635}

\begin{verbatim}
  (use-package swiper
  :bind
  (("\C-s" . swiper))
  :init
    (use-package avy
      :ensure t))
\end{verbatim}

\paragraph*{Swiper Avy}
\label{sec:org30195f1}

\begin{verbatim}
  (use-package avy
    :ensure t)
\end{verbatim}

\paragraph*{Counsel-Projectile}
\label{sec:orgbe8bbd4}

\href{https://github.com/ericdanan/counsel-projectile}{Counsel Projectile} provides a project management interface via ivy and
friends.

\begin{verbatim}
  (use-package counsel-projectile
    :ensure t
    :init
    (progn
      (counsel-projectile-on)))
\end{verbatim}

\paragraph*{Smex}
\label{sec:orgb90303f}

\begin{verbatim}
  (use-package smex
    :ensure t
    :init (setq-default smex-history-length 32))
\end{verbatim}

\paragraph*{Counsel OSX App}
\label{sec:orgb35e437}

\begin{verbatim}
   (use-package counsel-osx-app
     :if *is-mac*
     :ensure t
     :bind (("C-c o a" . counsel-osx-app)))
\end{verbatim}

\paragraph*{Counsel Dash}
\label{sec:org90f0b0b}

\begin{verbatim}
  (use-package counsel-dash
    :if *is-mac*
    :ensure t
    :init (defun counsel-dash-at-point ()
            "Counsel dash with selected point."
            (interactive)
            (counsel-dash
             (if (use-region-p)
                 (buffer-substring-no-properties
                  (region-beginning)
                  (region-end))
               (substring-no-properties (or (thing-at-point 'symbol) "")))))
    :config
    (setq counsel-dash-docsets-path
          (expand-file-name "~/Library/Application\sSupport/Dash/DocSets")))
\end{verbatim}

\subsubsection*{Deft}
\label{sec:org5c8a397}

\href{https://jblevins.org/projects/deft/}{Deft} is a notetaking application for Emacs.

\begin{verbatim}
  (use-package deft
    :ensure t
    :bind ("C-x C-n" . deft)
    :config
    (setq deft-extensions '("org")
          deft-directory "~/Dropbox/org/notes"
          deft-use-filename-as-title t
          deft-default-extension "org"))
\end{verbatim}

\subsubsection*{Wakatime}
\label{sec:orgdf602a2}

\begin{verbatim}
  (use-package wakatime-mode
    :if (and *is-mac* (or (string= (downcase computer-name) "hal") (string= (downcase computer-name) "junior")))
    :ensure t
    :init
    (add-hook 'prog-mode-hook 'wakatime-mode)
    :config
    (progn
      (setq wakatime-cli-path
            (expand-file-name "~/.local/lib/python3.6/site-packages/wakatime/cli.py")
            wakatime-python-bin
            (expand-file-name "~/.pyenv/shims/python"))

      (defun wakatime-dashboard ()
        (interactive)
        (browse-url "https://wakatime.com/dashboard"))))
\end{verbatim}

\subsection*{User Interface}
\label{sec:org0829b8c}
\subsubsection*{Cursor}
\label{sec:org4195e0a}
\paragraph*{Vertical Bar}
\label{sec:org87fb0b8}

Set the cursor to a bar. The default is too thin for my liking.
Set the width to 4px. Also remove the cursor in inactive windows.

\begin{verbatim}
       (setq-default cursor-type '(bar . 4)
                     cursor-in-non-selected-windows 'nil
                     x-stretch-cursor t
                     line-spacing 2)
\end{verbatim}

\paragraph*{Disable Blink}
\label{sec:org87498db}

Ultimately, I'd like to set a longer blink interval, like the "phase"
\texttt{caret\_style} setting in Sublime Text.

\begin{verbatim}
       (blink-cursor-mode -1)
\end{verbatim}

\paragraph*{Smart Cursor Color}
\label{sec:orgf351920}

\begin{verbatim}
       (use-package smart-cursor-color
         :ensure t
         :config
         (smart-cursor-color-mode +1))
\end{verbatim}

\subsubsection*{Theme}
\label{sec:org7dc16f0}
\paragraph*{Enable Custom Themes}
\label{sec:org8815990}

This disables Emacs asking questions about loading a new theme.

\begin{verbatim}
 (setq custom-safe-themes t)
\end{verbatim}


\paragraph*{Zenburn Theme}
\label{sec:org735d108}

\begin{verbatim}
  (use-package zenburn-theme
    :ensure t
    :config (load-theme 'zenburn))
\end{verbatim}

\paragraph*{Load Themes}
\label{sec:org02f05c6}

Zenburn theme has to be loaded before \hyperref[org-beautify-theme]{Org Beautify Theme} to preserve compatibility.

\subsubsection*{Modeline}
\label{sec:orga13267f}
\paragraph*{Display Time}
\label{sec:orga850998}

Show the time in the modeline.

\begin{verbatim}
  (display-time-mode 1)
\end{verbatim}

\paragraph*{Smart-Mode-Line}
\label{sec:org51bb720}

\begin{verbatim}
  (use-package smart-mode-line
    :ensure t
    :init
    (smart-mode-line-enable)
    :config
    (setq sml/mode-width 0
          sml/name-width 20
          sml/not-confirm-load-theme t)
    (setf rm-blacklist "")
    (sml/setup))
\end{verbatim}

\paragraph*{Mode Icons}
\label{sec:orgaf77438}

\begin{verbatim}
  (use-package mode-icons
    :ensure t
    :if *is-gui*
    :after smart-mode-line
    :config
    (mode-icons-mode))
\end{verbatim}

\subsubsection*{All The Icons}
\label{sec:org56c5fc9}

\href{https://github.com/domtronn/all-the-icons.el}{All The Icons} is a utility package for icons in Emacs.

\begin{verbatim}
  (use-package all-the-icons
    :if *is-gui*
    :ensure t
    :init
    (unless (straight-check-package "all-the-icons")
      (all-the-icons-install-fonts)))

  (use-package all-the-icons-ivy
      :after all-the-icons ivy
      :ensure t
      :if *is-gui*
      :init
      (all-the-icons-ivy-setup))

  (use-package all-the-icons-dired
    :if *is-gui*
    :ensure t
    :config
    (add-hook 'dired-mode-hook 'all-the-icons-dired-mode))
\end{verbatim}

\subsubsection*{Terminal}
\label{sec:orgcb06822}
\paragraph*{Multi-Term}
\label{sec:orgddaffe8}

\begin{verbatim}
(use-package multi-term
       :ensure t
       :bind
       (("C-c M-RET t" . multi-term)
	("C-c M-RET p" . multi-term-prev)
	("C-c M-RET n" . multi-term-next)
	("C-c M-RET o" . multi-term-dedicated-toggle))
       :config
       (progn
	 (setq multi-term-program
	     (if (string= shell-file-name "/bin/sh")
		 "/bin/bash"
	       shell-file-name))))
\end{verbatim}

\subsubsection*{Frame Font}
\label{sec:org8425f88}

Use the default monospaced font for each operating system.

\begin{verbatim}
 (cond (*is-linux*
  (set-frame-font "Ubuntu Mono 12" nil t))
 (*is-windows*
  (set-frame-font "Lucida Sans Typewriter 12" nil t))
 ((eq system-type 'darwin)
  (set-frame-font "SF Mono 12" nil t))
 (t
  (set-frame-font "Menlo 12" nil t)))
\end{verbatim}

\subsubsection*{Sunshine}
\label{sec:org395bcc1}

\begin{verbatim}
  (use-package sunshine
    :ensure t
    :config
    (setq sunshine-location "90024,USA"))
\end{verbatim}

\subsubsection*{Theme Changer}
\label{sec:org76a1bc7}

\begin{verbatim}
  (use-package theme-changer
    :ensure t
    :config
    (change-theme 'zenburn-theme 'anti-zenburn-theme))
\end{verbatim}

\subsubsection*{Emojify}
\label{sec:orgc8d3e70}

\begin{verbatim}
  (use-package emojify
    :ensure t
    :init (global-emojify-mode))
\end{verbatim}

\subsection*{Version Control}
\label{sec:org05a5b3b}
\subsubsection*{Magit}
\label{sec:org07e2eee}

\href{https://github.com/magit/magit}{Magit} describes itself as one of two git porcelains, the other being
git itself.

A git porcelain is jargon for a program that features a user-friendly
vcs interface, as opposed to lower-level scripting commands.

It's not a vitrified ceramic commonly used for decorative tableware.
Magit would not be very good at that.

As a git client though, magit is awesome.

\begin{verbatim}
  (use-package magit
    :ensure t
    :bind (("C-c v b" . magit-blame)
           ("C-c v C" . magit-clone)
           ("C-c v c" . magit-checkout)
           ("C-c v i" . magit-init)
           ("C-c v m" . magit-merge)
           ("C-c v l" . magit-log-buffer-file)
           ("C-c v p" . magit-pull)
           ("C-c v P" . magit-push)
           ("C-c v v" . magit-status))
    :config (setq magit-save-repository-buffers 'dontask))
\end{verbatim}

\paragraph*{Magithub}
\label{sec:orgdcc6e12}

\href{https://github.com/vermiculus/github}{Magithub} offers an interface to github to complement magit.

\begin{verbatim}
  (use-package magithub
    :after magit
    :ensure t
    :commands magithub-dispatch-popup
    :bind (:map magit-status-mode-map
                ("@" . magithub-dispatch-popup))
    :config
    (progn
      (magithub-feature-autoinject t)))
\end{verbatim}

\subsubsection*{gist.el}
\label{sec:org458843c}

Emacs integration for gist.github.com.

\href{https://github.com/defunkt/gist.el}{Gist} requires generating a personal access token with \texttt{gist} scope, and
optionally \texttt{user} and \texttt{repo} scopes.

\begin{verbatim}
  (use-package gist
    :ensure t
    :bind (("C-c C-g l" . gist-list)
           ("C-c C-g r" . gist-region)
           ("C-c C-g b" . gist-buffer)
           ("C-c C-g p" . gist-buffer-private)
           ("C-c C-g B" . gist-region-or-buffer)
           ("C-c C-g P" . gist-region-or-buffer-private)))
\end{verbatim}

\subsubsection*{git-timemachine}
\label{sec:org35e2850}

Travel back in time (to your last commit).

\begin{verbatim}
  (use-package git-timemachine
    :ensure t
    :bind
    ("C-x v t" . git-timemachine-toggle)
    :config
    (setq git-timemachine-abbreviation-length 7))
\end{verbatim}

\subsubsection*{git-messenger}
\label{sec:org3aa3257}

Pop-up feature for viewing the last git commit.

\begin{verbatim}
  (use-package git-messenger
    :ensure t
    :bind
    (("C-c v m" . git-messenger:popup-message)))
\end{verbatim}

\subsubsection*{git modes}
\label{sec:orga4290ca}

\begin{verbatim}
  (use-package git-modes
    :ensure t)
\end{verbatim}
\subsection*{Web Browsing}
\label{sec:org8ac190d}
\subsubsection*{osx-browse}
\label{sec:org511524a}

This library provides several useful commands for using the
Google Chrome, Safari, and Firefox web browsers on macOS.

\begin{verbatim}
  (use-package osx-browse
    :ensure t
    :if *is-mac*
    :config
    (osx-browse-mode 1))
\end{verbatim}

\subsection*{Email}
\label{sec:orgeb3abb8}
\subsubsection*{Mu}
\label{sec:org4156924}

\begin{verbatim}
  (use-package mu4e
    :if *is-mac*
    :load-path "/usr/local/Cellar/mu/0.9.18_1/share/emacs/site-lisp/mu/mu4e"
    :config
    (progn
      (setq mu4e-maildir (expand-file-name "~/.mail")
            mu4e-context-policy 'pick-first
            mu4e-compose-policy nil
            mu4e-get-mail-command "offlineimap -q -u quiet"
            mu4e-show-images t
            mu4e-show-addresses t)

       ;; smtp settings
       (setq mu4e-send-mail-function 'smtp-mail-send-it
       mu4e-default-smtp-server "smtp.gmail.com"
       smtpmail-smtp-service 587
       smtp-mail-smtp-stream-type 'ssl)


       (setq mu4e-contexts
             `( ,(make-mu4e-context
                  :name "private"
                  :match-func (lambda (msg)
                                (when msg
                                  mu4e-message-contact-field-matches msg
                                  :to "jchaffin57@gmail.com"))
                  :leave-func (lambda ()
                                (mu4e-message "Leaving Gmail Account"))
                  :vars '( (mu4e-reply-to-address "jchaffin@ucla.edu")
                           ( user-mail-address . "jchaffin57@gmail.com" )
                           ( user-full-name . "Jacob Chaffin" )
                           ( mu4e-drafts-folder . "/private/[Gmail].Drafts" )
                           ( mu4e-sent-folder . "/private/[Gmail].Trash" )
                           ( mu4e-refile-folder . "/archived")
                           ( mu4e-compose-signature .
                                                    (concat
                                                     "Jacob Chaffin\n"
                                                     "UCLA 19\n"
                                                     "Linguistics and Computer Science\n"
                                                     "jchaffin@ucla.edu\n"))))

                ,(make-mu4e-context
                  :name "school"
                  :enter-func (lambda () (mu4e-message "Switching to UCLA Mail"))
                  :leave-func (lambda () (mu4e-message "Leaving UCLA Mail"))
                  :match-func  (lambda (msg)
                                 (when msg
                                   (mu4e-message-contact-field-matches msg
                                                                       :to (or "jchaffin@ucla.edu" "jchaffin@g.ucla.edu"))))
                  :vars '( (user-mail-address . "jchaffin@ucla.edu" )
                           (user-full-name . "Jacob Chaffin" )
                           (mu4e-compose-signature . (concat
                                                      "Jacob Chaffin\n"
                                                      "UCLA 19\n"
                                                      "Linguistics and Computer Science\n"
                                                      "jchaffin@ucla.edu\n"
                                                      "(650)-380-3288\n"))))))))

\end{verbatim}

\subsection*{Programming Languages}
\label{sec:org01758f4}
\subsubsection*{Lisp}
\label{sec:orgd153015}
\paragraph*{Parens}
\label{sec:org866780f}

\begin{itemize}
\item \href{https://github.com/Fuco1/smartparens/wiki/Paredit-and-smartparens}{Paredit and Smartparens}
\end{itemize}

\subparagraph*{Paredit}
\label{sec:org9071adf}

We could use \texttt{:init} key to hook the \texttt{enable-paredit-mode}
function to each of the implementing languages like is
done \href{https://github.com/tomjakubowski/.emacs.d/blob/master/init.el}{here}, but I think adding the hook in the configuration
block of the programming language is easier to follow and
offers more meaningful semantics.

\begin{verbatim}
  (use-package paredit
    :ensure t
    :diminish paredit-mode
    :config
    (use-package eldoc
      :ensure t
      :config
      (eldoc-add-command
       'paredit-backward-delete
       'paredit-close-round))
    (autoload 'enable-paredit-mode "paredit" "Turn on pseudo-structural editing of Lisp code." t))
\end{verbatim}

\subparagraph*{Smartparens}
\label{sec:orgc8c55c7}

Like paredit, \href{https://github.com/Fuco1/smartparens}{smartparens} is a minor-mode for managing parens
pairs. However, it also offers support for curly brackets in
JavaScript objects, angle brackets in HTML, and most other major
programming languages. I think I the "delete-on-command" behavior of
paredit for lisp programming, but in languages where locating
unmatched pairs is less comparable to searching for a needle in a
haystack, smartparens are a great productivity tool.

\begin{verbatim}
  (use-package smartparens
    :ensure t
    :init
    (require 'smartparens-config))
\end{verbatim}

\paragraph*{Hlsexp}
\label{sec:org654795a}

Minor mode to highlight s-expresion.

\begin{verbatim}
  (use-package hl-sexp
    :ensure t)
\end{verbatim}

\subsubsection*{Common-Lisp}
\label{sec:org79e9913}

Configuration for emacs-lisp.

\begin{verbatim}
  (use-package lisp-mode
    :after paredit
    :config
    (add-hook 'lisp-mode-hook #'paredit-mode)
    (add-hook 'lisp-mode-hook #'hl-sexp-mode)
    (add-hook 'emacs-lisp-mode-hook #'paredit-mode)
    (add-hook 'emacs-lisp-mode-hook #'hl-sexp-mode))
\end{verbatim}

\paragraph*{Slime}
\label{sec:orga51e41e}

\href{https://common-lisp.net/project/slime/}{SLIME} is The Superior Lisp Interaction Mode for Emacs.

\begin{verbatim}
  (use-package slime
    :commands slime
    :defines (slime-complete-symbol*-fancy slime-completion-at-point-functions)
    :ensure t
    :if *is-mac*
    :init
    (progn
      (setq slime-contribs '(slime-asdf
                             slime-fancy
                             slime-indentation
                             slime-sbcl-exts
                             slime-scratch)
            inferior-lisp-program "sbcl"
            ;; enable fuzzy matching in code buffer and SLIME REPL
            slime-complete-symbol*-fancy t
            slime-completion-at-point-functions 'slime-fuzzy-complete-symbol)
      (defun slime-disable-smartparens ()
        (smartparents-strict-mode -1)
        (turn-off-smartparens-mode))
      (add-hook 'slime-repl-mode-hook #'slime-disable-smartparens)))
\end{verbatim}
\subsubsection*{Clojure}
\label{sec:org96fec5d}
\paragraph*{Clojure Mode (\href{https://gihub.com/clojure-emacs/clojure-mode}{repository})}
\label{sec:org9356563}

Provides key bindings and code colorization for Clojure(Script).

\begin{verbatim}
  (use-package clojure-mode
    :ensure t
    :mode (("\\.edn$" . clojure-mode)
           ("\\.cljs$" . clojurescript-mode)
           ("\\.cljx$" . clojurex-mode)
           ("\\.cljsc$" . clojurec-mode))
    :config
    (add-hook 'clojure-mode-hook #'enable-paredit-mode)
      (use-package cljsbuild-mode
        :ensure t
        :init
        (add-to-hooks #'cljsbuild-mode '(clojure-mode clojurescript-mode)))
      (use-package elein
        :ensure t))
\end{verbatim}

\paragraph*{ClojureScript}
\label{sec:org3e47482}
\subparagraph*{Lein Cljsbuild}
\label{sec:org8074c38}

Minor mode offering \texttt{lein cljsbuild} commands for the Leiningen \href{https://github.com/emezeske/lein-cljsbuild}{plugin}.

\begin{verbatim}
  (use-package cljsbuild-mode
    :ensure t
    :init
    (add-to-hooks #'cljsbuild-mode '(clojure-mode clojurescript-mode)))
\end{verbatim}

\subparagraph*{elein}
\label{sec:orgb761253}

\href{https://github.com/remvee/elein}{Elein} rovides support for leiningen commands in Emacs.

\begin{verbatim}
  (use-package elein
    :ensure t)
\end{verbatim}

\paragraph*{Clojure Mode Extra Font Locking}
\label{sec:org7adf88e}

Additional syntax highlighting for \texttt{clojure-mode}.


\begin{verbatim}
  (use-package clojure-mode-extra-font-locking
    :ensure t)
\end{verbatim}

\paragraph*{Cider (\href{https://github.com/clojure-emacs/cider}{repository})}
\label{sec:orgdb6caa7}

Provides integration with a Clojure repl.

\begin{verbatim}
  (use-package cider
    :ensure t
    :after company
    :config
    (setq cider-repl-history-file "~/.emacs.d/cider-history"
          cider-repl-use-clojure-font-lock t
          cider-repl-result-prefix ";; => "
          cider-repl-wrap-history t
          cider-repl-history-size 3000
          cider-show-error-buffer nil
          nrepl-hide-special-buffers t)
    (add-hook 'cider-mode-hook #'eldoc-mode)
    (add-hook 'cider-mode-hook #'company-mode)
    (add-hook 'cider-repl-mode-hook #'cider-company-enable-fuzzy-completion)
    (add-hook 'cider-mode-hook #'cider-company-enable-fuzzy-completion)
    (add-hook 'cider-repl-mode-hook #'company-mode)
    (add-hook 'cider-repl-mode-hook #'subword-mode)
    (add-hook 'cider-repl-mode-hook #'enable-paredit-mode))
\end{verbatim}

\paragraph*{inf-clojure}
\label{sec:orgff98f24}

\texttt{inf-clojure} is a third-party package offering basic integration
with a running Clojure subprocess. This package is necessary for
running a Figwheel process with Emacs.
It's not as feature-rich as CIDER, but still offers the ability
to load files, switch namespaces, evaluate expressions, show documentation,
and do macro-expansion.

\emph{Currently disabled due to conflicts with \texttt{cider}}

\begin{verbatim}
  (use-package inf-clojure
    :ensure t
    :init
    (add-hook 'clojure-mode-hook #'inf-clojure-minor-mode))
\end{verbatim}

Now lets write a simple function to run Figwheel as a Clojure
subprocess.

\begin{verbatim}
   (defun figwheel-repl ()
     (interactive)
     (inf-clojure "lein figwheel"))
\end{verbatim}

\paragraph*{Linting Clojure}
\label{sec:org9d39366}

The \href{https://github.com/clojure-emacs/squiggly-clojure}{flycheck-clojure} package allows syntax checking for Clojure(Script).
It uses \href{https://github.com/jonase/eastwood}{eastwood}, \href{http://typedclojure.org/}{core.typed} and \href{https://github.com/jonase/kibit}{kibit} to lint Clojure(Script) through CIDER.


\begin{verbatim}
  (use-package flycheck-clojure
    :ensure t
    :after cider flycheck
    :config
    (flycheck-clojure-setup))
\end{verbatim}

Okay. There's been some snares getting this package to work, but with
the help of this \href{http://blog.podsnap.com/squiggly.html}{blogpost} from the \texttt{flycheck-clojure} repo. (note to
self: READMEs are friends), I'm beginning to make progress.

After cloning the project repo from my local file system, my debugging
process has consisted of the following:

\begin{enumerate}
\item Navigate to the \href{https://github.com/clojure-emacs/squiggly-clojure/tree/master/sample-project}{sample-project} in the \texttt{squiggly-clojure} project repo.
\item Open \texttt{core.clj}
\item Launch an nrepl with Cider.
\item See \texttt{flycheck-clojure} being weird.
\item Annoyed Google search.
\item Edit my \texttt{clojure} configuration based on the last blog post.
\item Restart Emacs.
\item Repeat.
\end{enumerate}

After running into problems documented in issues \href{https://github.com/clojure-emacs/squiggly-clojure/issues/45}{\#45}, \href{https://github.com/clojure-emacs/squiggly-clojure/issues/13}{\#13}, and \href{https://github.com/clojure-emacs/squiggly-clojure/issues/46}{\#46,}
\sout{I finally was able to get \texttt{flycheck-clojure} to stop doing weird things}.

\sout{It's now doing nothing at all.}

The project maintainers provide an \href{https://github.com/clojure-emacs/example-config}{example-config} for setting up
emacs, cider, flycheck, and friends. I messed around with this config
for about half an hour and the latency issues and general
inconsistency are the same.

I'm guessing I need to actually include the linters in my project's
\texttt{project.clj}, but it's weird this package worked at all for bits and
stretches if the dependencies need to be installed manually.

\paragraph*{Typed Clojure}
\label{sec:orgd0632e5}

Let's give this \href{https://github.com/typedclojure/typed-clojure-mode}{guy} a try.

\begin{verbatim}
  (use-package typed-clojure-mode
     :ensure t
     :after clojure-mode
     :init
     (add-hook 'clojure-mode-hook 'typed-clojure-mode))
\end{verbatim}


\texttt{java.lang.GoEFUrself}!

\begin{verbatim}
   # CompilerException java.lang.RuntimeException: Unable to resolve symbol: sym in this context, compiling:(clojure/core/types.clj:1170:5)
\end{verbatim}

I've now stumbled upon \texttt{cider-{}-debug-mode}.

This mode cannot be called manually, but with \texttt{C-u C-M-x} instead,
and now \texttt{flycheck-clojure} \sout{appears to be sort of working}.

3 months later\ldots{}

The above strikethrough denotes the point in time where I officially
said \href{https://www.si.com/nba/2017/05/16/steve-kerr-sneakers-message}{FI}.

\paragraph*{Flycheck-Pos-Tip}
\label{sec:org1fd11dc}

The \texttt{flycheck-clojure} repository recommendeds to install
\href{https://github.com/flycheck/flycheck-pos-tip}{flycheck-pos-tip} to keep linting and type errors from clashing with
CIDER eldoc information.

\begin{verbatim}
  (use-package flycheck-pos-tip
    :ensure t
    :after flycheck
    :init
    (flycheck-pos-tip-mode)
    :config
    (setq flycheck-display-errors-function
          #'flycheck-pos-tip-error-messages))
\end{verbatim}

\subsubsection*{Java}
\label{sec:org3034dcb}
\paragraph*{Eclim}
\label{sec:org88b9eb3}

\begin{verbatim}
  (use-package eclim
    :ensure t
    :if (eq system-type 'darwin)
    ;; load my forked version
    ;; :load-path "site-lisp/emacs-eclim/"
    :config
    (setq eclim-eclipse-dirs '("/Applications/Eclipse.app/Contents/Eclipse")
          eclim-executable "/Applications/Eclipse.app/Contents/Eclipse/eclim"
          eclimd-executable "/Applications/Eclipse.app/Contents/Eclipse/eclimd"
          eclimd-default-workspace "~/Developer/Projects/Java/Workspace"
          eclimd-autostart-with-default-workspace t
          eclim-autostart nil
          eclim-wait-for-process t))
\end{verbatim}

\subsubsection*{\LaTeX{}}
\label{sec:org60e7524}
\paragraph*{Tex Config}
\label{sec:orgb958070}

\begin{verbatim}
  (use-package tex
    :ensure auctex
    :defines latex-nofill-env
    :functions chaffin/tex-auto-fill-mode
    :init
    (progn
      (setq TeX-command-default "LaTeX"
            TeX-engine 'xetex
            TeX-auto-save t
            TeX-parse-self t
            TeX-syntactic-comment t
            TeX-source-correlate-start-server nil
            LaTeX-fill-break-at-separators nil)
      (defvar latex-nofill-env '("equation"
                                 "equation*"
                                 "align"
                                 "align*"
                                 "tabular"
                                 "tikzpicture"))
      (defun chaffin//tex-autofill ()
        "Check whether the pointer is currently inside one of
  the environments in `latex-nofill-env` and inhibits auto-filling
  of the current paragraph."
        (let ((do-auto-fill t)
              (current-environment "")
              (level 0))
          (while (and do-auto-fill (not (string- current-environment "document")))
            (setq level (1+ level)
                  current-environment (LaTeX-current-environment level)
                  do-auto-fill (not (member current-environment latex-nofill-env)))))
        (when do-auto-fill
          (do-auto-fill)))

      (defun chaffin/tex-auto-fill-mode ()
        (interactive)
        (auto-fill-mode)
        (setq auto-fill-mode 'chaffin/tex-autofill))

      (add-hook 'LaTeX-mode-hook 'chaffin/tex-auto-fill-mode)
      (add-hook 'LaTeX-mode-hook 'LaTeX-math-mode)
      (add-hook 'LaTeX-mode-hook 'TeX-PDF-mode)
      (add-hook 'LaTeX-mode-hook 'smartparens-mode)
      ;; Company AucTeX
        (use-package company-auctex
          :ensure t
          :init
          (company-auctex-init))
      ;; RefTeX
        (defun jchaffin/init-reftex ()
          (add-hook 'LaTeX-mode-hook 'turn-on-reftex)
          (setq reftex-plug-into-AUCTeX '(nil nil t t t)
                reftex-use-fonts t
                reftex-default-bibliography '("~/Dropbox/org/papers/references.bib")))
      (jchaffin/init-reftex)
      ;; Bibtex Config
      
      ;; Magic Latex Buffer
        (use-package magic-latex-buffer
          :ensure t
          :init
          (progn
            (add-hook 'LaTeX-mode-hook 'magic-latex-buffer)
            (setq magic-latex-enable-block-highlight t
                  magic-latex-enable-suscript t
                  magic-latex-enable-pretty-symbols t
                  magic-latex-enable-block-align t
                  magic-latex-enable-inline-image t)))
      ;; Latex Preview Pane
      ;; buggy
      ;;   (use-package latex-preview-pane
      ;;     :ensure t
      ;;     :config (latex-preview-pane-enable))

      ;; Org Edit Latex Buffer
        (use-package org-edit-latex
          :ensure t)
      ;; Latex Extra
      (use-package latex-extra
        :ensure t
        :init
        (add-hook 'LaTeX-mode-hook 'latex-extra-mode))
      ;; Auctex latexmk
      (use-package auctex-latexmk
        :ensure t
        :config
        (setq auctex-latexmk-inherit-TeX-PDF-mode t))
      ))
\end{verbatim}

\paragraph*{Bibtex}
\label{sec:org631b0d7}

\#+NAME bibtex-config
\begin{verbatim}
(setq bibtex-autokey-year-length 4
      bibtex-autokey-name-year-separator "-"
      bibtex-autokey-year-title-separator "-"
      bibtex-autokey-titleword-separator "-"
      bibtex-autokey-titlewords 2
      bibtex-autokey-titlewords-stretch 1
      bibtex-autokey-titleword-length 5)
\end{verbatim}

\paragraph*{\LaTeX{} Extra}
\label{sec:org994070f}

\begin{verbatim}
(use-package latex-extra
  :ensure t
  :init
  (add-hook 'LaTeX-mode-hook 'latex-extra-mode))
\end{verbatim}

\paragraph*{\LaTeX{} Preview Pane}
\label{sec:org4b49acd}

\begin{verbatim}
  (use-package latex-preview-pane
    :ensure t
    :config (latex-preview-pane-enable))
\end{verbatim}

\paragraph*{Company AucTeX}
\label{sec:org7f14d47}

\begin{verbatim}
  (use-package company-auctex
    :ensure t
    :init
    (company-auctex-init))
\end{verbatim}

\paragraph*{Org Edit Latex}
\label{sec:org2583e34}

\begin{verbatim}
  (use-package org-edit-latex
    :ensure t)
\end{verbatim}

\paragraph*{Magic Latex Buffer}
\label{sec:orgfce3322}

Prettify dedicated org-mode latex buffers.

\begin{verbatim}
  (use-package magic-latex-buffer
    :ensure t
    :init
    (progn
      (add-hook 'LaTeX-mode-hook 'magic-latex-buffer)
      (setq magic-latex-enable-block-highlight t
            magic-latex-enable-suscript t
            magic-latex-enable-pretty-symbols t
            magic-latex-enable-block-align t
            magic-latex-enable-inline-image t)))
\end{verbatim}

\paragraph*{Auctex Latexmk}
\label{sec:org49fd60e}

\begin{verbatim}
(use-package auctex-latexmk
  :ensure t
  :config
  (setq auctex-latexmk-inherit-TeX-PDF-mode t))
\end{verbatim}

\paragraph*{RefTeX}
\label{sec:org3afe073}


RefTeX is a citation and reference tool maintained by the
AucTeX team.

Since Emacs 24.3, its built in with the Emacs distribution.

\begin{verbatim}
  (defun jchaffin/init-reftex ()
    (add-hook 'LaTeX-mode-hook 'turn-on-reftex)
    (setq reftex-plug-into-AUCTeX '(nil nil t t t)
          reftex-use-fonts t
          reftex-default-bibliography '("~/Dropbox/org/papers/references.bib")))
\end{verbatim}

\paragraph*{Texinfo}
\label{sec:orgd281516}

\#+texinfo-config
\begin{verbatim}
  (use-package texinfo
    :ensure t
    :defines texinfo-section-list
    :commands texinfo-mode
    :init
    (add-to-list 'auto-mode-alist '("\\.texi$" . texinfo-mode)))
\end{verbatim}

\subsubsection*{Javascript}
\label{sec:org556ea14}
\paragraph*{JavaScript Preamble}
\label{sec:orgcfef13f}

\begin{verbatim}
    (use-package js2-mode
      :ensure t
      :mode (("\\.js\\'" . js2-mode))
      :config
      (setq js-indent-level 2))
    (use-package coffee-mode
      :ensure t
      :mode ("\\.coffee\\'" . coffee-mode))
    (use-package json-mode
      :defer t
      :ensure t
      :mode (("\\.json\\'" . json-mode)))
    (use-package tern
      :ensure t
      :after js2-mode
      :init (add-hook 'js2-mode-hook 'tern-mode))
\end{verbatim}

\paragraph*{js2-mode}
\label{sec:orgbe18e11}

\begin{verbatim}
  (use-package js2-mode
    :ensure t
    :mode (("\\.js\\'" . js2-mode))
    :config
    (setq js-indent-level 2))
\end{verbatim}

\paragraph*{rjsx-mode}
\label{sec:org01eb4cf}
Real jsx support.

\begin{verbatim}
  (use-package rjsx-mode
    :ensure t
    :mode "\\.jsx\\'")
\end{verbatim}

\paragraph*{Tern}
\label{sec:orgd84b5ca}

\href{https://github.com/proofit404/company-tern}{Tern} is a code-analysis engine for JavaScript.

\begin{verbatim}
  (use-package tern
    :ensure t
    :after js2-mode
    :init (add-hook 'js2-mode-hook 'tern-mode))
\end{verbatim}

\subparagraph*{Company Tern (\href{https://github.com/proofit404/company-tern}{repository})}
\label{sec:org576125f}

Tern backend using company.

\begin{verbatim}
  (use-package company-tern
    :ensure t
    :init
    (add-to-list 'company-backends 'company-tern)
    :config
    (setq company-tern-property-marker nil
          company-tern-meta-as-single-line t))
\end{verbatim}

\paragraph*{JSON}
\label{sec:orgc3265b4}

\begin{verbatim}
  (use-package json-mode
    :defer t
    :ensure t
    :mode (("\\.json\\'" . json-mode)))
\end{verbatim}

Based off/shamelessly copied and pasted from Spacemacs
React layer.

\begin{verbatim}
  (progn
    (define-derived-mode react-mode web-mode "react")
    (add-to-list 'auto-mode-alist '("\\.jsx\\'" . react-mode))
    (add-to-list 'auto-mode-alist '("\\.react.js\\'" . react-mode))
    (add-to-list 'auto-mode-alist '("\\.index.android.js\\'" . react-mode))
    (add-to-list 'auto-mode-alist '("\\.index.ios.js\\'" . react-mode))
    (add-to-list 'auto-mode-alist '("\\/\\*\\* @jsx .*\\*/\\'" . react-mode)))
\end{verbatim}

\paragraph*{Coffee}
\label{sec:org328eb87}

\begin{verbatim}
  (use-package coffee-mode
    :ensure t
    :mode ("\\.coffee\\'" . coffee-mode))
\end{verbatim}

\paragraph*{Add Node Modules Path (\href{https://github.com/codesuki/add-node-modules-path}{repository})}
\label{sec:org8c85111}

\begin{verbatim}
  (use-package add-node-modules-path
    :ensure t
    :defer t
    :init
    (add-hook 'js2-mode-hook #'add-node-modules-path))
\end{verbatim}

\paragraph*{Npm Mode}
\label{sec:org7d72b2b}

\begin{verbatim}
  (use-package npm-mode
    :ensure t
    :defer t)
\end{verbatim}
\paragraph*{Enable syntax checking in \texttt{js-mode} and related mode buffers.}
\label{sec:org7be645f}

\begin{verbatim}
  (dolist (mode '(coffee-mode js2-mode json-mode))
    (push mode flycheck-global-modes))
\end{verbatim}

\subsubsection*{Web}
\label{sec:org1f47585}
\paragraph*{Web Mode}
\label{sec:org6b01c90}

\begin{verbatim}
  (use-package web-mode
    :ensure t
    :bind (:map web-mode-map
                ("M-n" . web-mode-tag-match))
    :mode
    (("\\.phtml\\'"      . web-mode)
     ("\\.tpl\\.php\\'"  . web-mode)
     ("\\.twig\\'"       . web-mode)
     ("\\.html\\'"       . web-mode)
     ("\\.htm\\'"        . web-mode)
     ("\\.[gj]sp\\'"     . web-mode)
     ("\\.as[cp]x?\\'"   . web-mode)
     ("\\.eex\\'"        . web-mode)
     ("\\.erb\\'"        . web-mode)
     ("\\.mustache\\'"   . web-mode)
     ("\\.handlebars\\'" . web-mode)
     ("\\.hbs\\'"        . web-mode)
     ("\\.eco\\'"        . web-mode)
     ("\\.ejs\\'"        . web-mode)
     ("\\.djhtml\\'"     . web-mode))

    :config
    (progn
      (setq web-mode-engines-alist
          '(("php" . "\\.phtml\\'")
            ("blade" . "\\.blade\\'")))

      (defun jchaffin/web-mode-enable ()
        (setq web-mode-enable-auto-pairing t
              web-mode-enable-css-colorization t
              web-mode-enable-block-face t
              web-mode-enable-part-face t
              web-mode-enable-comment-keywords t
              web-mode-enable-heredoc-fontification t
              web-mode-enable-current-element-highlight t
              web-mode-enable-current-column-highlight t))

      (add-hook 'web-mode-hook #'jchaffin/web-mode-enable)


      (defun jchaffin/web-mode-indent ()
        (setq web-mode-markup-indent-offset 2
              web-mode-code-indent-offset 2
              web-mode-style-padding 1
              web-mode-script-padding 1
              web-mode-block-padding 0
              web-mode-comment-style 2))

      (add-hook 'web-mode-hook #'jchaffin/web-mode-indent)

        (use-package tagedit
          :ensure t
          :diminish tagedit-mode
          :config
          (progn
            (tagedit-add-experimental-features)
            (add-hook 'html-mode-hook (lambda () (tagedit-mode 1)))))
      
        (use-package emmet-mode
          :ensure t
          :defer t
          :init
          (add-to-hooks 'emmet-mode '(css-mode-hook
                                     html-mode-hook
                                     web-mode-hook)))
        (use-package company-web
          :ensure t
          :init
          (progn
              (use-package company-tern
                :ensure t
                :init
                (add-to-list 'company-backends 'company-tern)
                :config
                (setq company-tern-property-marker nil
                      company-tern-meta-as-single-line t))
            (defun jchaffin/company-web-mode-hook ()
              "Autocompletion hook for web-mode"
              (set (make-local-variable 'company-backends)
                   '(company-tern company-web-html company-yasnippet company-files)))
      
            (add-hook 'web-mode-hook #'jchaffin/company-web-mode-hook)
      
            ;; Enable JavaScript completion between <script>...</script> etc.
            (defadvice company-tern (before web-mode-set-up-ac-sources activate)
              "Set `tern-mode' based on current language before running company-tern."
              (if (equal major-mode 'web-mode)
                  (let ((web-mode-cur-language
                         (web-mode-language-at-pos)))
                    (if (or (string= web-mode-cur-language "javascript")
                            (string= web-mode-cur-language "jsx"))
                        (unless tern-mode (tern-mode))
                      (if tern-mode (tern-mode -1))))))))))
\end{verbatim}

\paragraph*{Emmet}
\label{sec:org991813f}

\begin{verbatim}
  (use-package emmet-mode
    :ensure t
    :defer t
    :init
    (add-to-hooks 'emmet-mode '(css-mode-hook
                               html-mode-hook
                               web-mode-hook)))
\end{verbatim}

\paragraph*{HTML}
\label{sec:orgc0eb211}
\subparagraph*{Tag Edit}
\label{sec:org390cb0e}

\begin{verbatim}
  (use-package tagedit
    :ensure t
    :diminish tagedit-mode
    :config
    (progn
      (tagedit-add-experimental-features)
      (add-hook 'html-mode-hook (lambda () (tagedit-mode 1)))))
\end{verbatim}

\paragraph*{CSS}
\label{sec:org74dbce2}
\subparagraph*{CSS Mode}
\label{sec:orgdbff771}

\begin{verbatim}
  (use-package css-mode
    :ensure t
    :defer t
    :commands css-expand-statment css-contract-statement
    :bind (("C-c c z" . css-contract-statement)
           ("C-c c o" . css-expand-statement))
    :init
    (progn
      (defun css-expand-statment ()
        (interactive)
        (save-excursion
          (end-of-line)
          (search-backward "{")
          (forward-char 1)
          (while (or (eobp) (not (looking-at "}")))
            (let ((beg (point)))
              (newline)
              (search-forward ";")
              (indent-region beg (point))))
          (newline)))

      (defun css-contrac-statement ()
        "Contract CSS Block"
        (interactive)
        (end-of-line)
        (search-backward "{")
        (while (not (looking-at "}"))
          (join-line -1)))))
\end{verbatim}

\subparagraph*{Less}
\label{sec:orge72d2b6}

\begin{verbatim}
  (use-package css-less-mode
    :ensure t
    :mode ("\\.less\\'" . less-css-mode))
\end{verbatim}

\subparagraph*{SASS}
\label{sec:org77f2874}

\begin{verbatim}
  (use-package sass-mode
    :ensure t
    :mode ("\\.sass\\'" . sass-mode))
\end{verbatim}

\subparagraph*{SCSS}
\label{sec:org2a609c6}

\begin{verbatim}
  (use-package scss-mode
    :ensure t
    :mode ("\\.scss\\'" . scss-mode))
\end{verbatim}

\paragraph*{Syntax Checking and Code Completion}
\label{sec:org9bbd284}
\subparagraph*{Company Web (\href{https://github.com/osv/company-web}{repository})}
\label{sec:org4d68ca5}

Code completion for html-mode, web-mode, jade-mode,
and slim-mode using company.

\begin{verbatim}
  (use-package company-web
    :ensure t
    :init
    (progn
        (use-package company-tern
          :ensure t
          :init
          (add-to-list 'company-backends 'company-tern)
          :config
          (setq company-tern-property-marker nil
                company-tern-meta-as-single-line t))
      (defun jchaffin/company-web-mode-hook ()
        "Autocompletion hook for web-mode"
        (set (make-local-variable 'company-backends)
             '(company-tern company-web-html company-yasnippet company-files)))

      (add-hook 'web-mode-hook #'jchaffin/company-web-mode-hook)

      ;; Enable JavaScript completion between <script>...</script> etc.
      (defadvice company-tern (before web-mode-set-up-ac-sources activate)
        "Set `tern-mode' based on current language before running company-tern."
        (if (equal major-mode 'web-mode)
            (let ((web-mode-cur-language
                   (web-mode-language-at-pos)))
              (if (or (string= web-mode-cur-language "javascript")
                      (string= web-mode-cur-language "jsx"))
                  (unless tern-mode (tern-mode))
                (if tern-mode (tern-mode -1))))))))
\end{verbatim}

\subsubsection*{Markdown}
\label{sec:orgeabe2a4}
\paragraph*{Markdown Mode}
\label{sec:org7f3fd67}

\begin{itemize}
\item See \url{https://jblevins.org/projects/markdown-mode/}
\end{itemize}

\#+NAME markdown-mode-config
\begin{verbatim}
  (use-package markdown-mode
    :ensure t
    :commands (markdown-mode gfm-mode)
    :mode (("README\\.md\\'" . gfm-mode)
           ("\\.md\\'" . markdown-mode)
           ("\\.markdown\\'" . markdown-mode))
    :init
    (progn
      (setq markdown-command "multimarkdown")
      (when *is-mac*
        ;; FIX ME
        (setq markdown-open-command (lambda () (shell-command "open -a Marked" buffer-file-name))))))
\end{verbatim}

\paragraph*{markdown-mode+}
\label{sec:org3ce1866}

\begin{verbatim}
  (use-package markdown-mode+
    :if *is-mac*
    :ensure t)
\end{verbatim}
\subsubsection*{Ruby}
\label{sec:org9fe9e03}
\paragraph*{ruby-mode}
\label{sec:org6042ed3}

\begin{verbatim}
  (use-package ruby-mode
    :mode "\\.rb\\'"
    :interpreter "ruby"
    :functions inf-ruby-keys
    :config
    (defun chaffin/ruby-mode-hook ()
      (require 'inf-ruby)
      (inf-ruby-keys))

    (add-hook #'ruby-mode-hook #'chaffin/ruby-mode-hook))
\end{verbatim}
\subsubsection*{Docker}
\label{sec:org57159f7}

\begin{verbatim}
  (use-package dockerfile-mode
    :ensure t
    :mode ( "Dockerfile\\'" .  dockerfile-mode))
\end{verbatim}
\end{document}